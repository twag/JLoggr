var JLoggr,log;(function(n){var i=function(){function n(){this.load=!1,this.pos=1,this.size=0}return n}(),r,u,t;n.JLoggrState=i,r=function(){function t(){var n=this;this.IE6_POSITION_FIXED=!0,this.JLoggrCookieName="JLoggrSettings",this.cache=[],this.classes={},this.profiler={},this.IDs={JLoggr:"JLoggr",checkbox:"bbVis",filters:"bbFilters",controls:"bbControls",size:"bbSize"},this.messageTypes={debug:!0,info:!0,warn:!0,error:!0,profile:!0},this.state=this.getState(),$(function(){n.onLoad()})}return t.prototype.generateMarkup=function(){var i,t;for(i in this.messageTypes)[].push(['<span class="',i,'" type="',i,'"><\/span>'].join(""));return t=document.createElement("DIV"),t.id=this.IDs.JLoggr,t.style.display="none",n,t.innerHTML=['<div class="" style="background:#aaa;overflow:hidden;">','<div class="" style="background:#3f3f3f;padding:5px;color:#fe9516;overflow:hidden;"><div class="pull-left">JLoggr <\/div>','<div class = "pull-right" >Level: ','<a href = "#" style="color:white;"  class = "badge" > Debug <\/a>','&nbsp; <a href = "#" style="color:white;" > Info <\/a>','&nbsp; <a href = "#" style="color:white;" > Warning <\/a>','&nbsp; <a href = "#" style="color:white;" > Error <\/a>',"<\/div> <\/div> ",'<div class="">',"<\/div>",'<div class="" style="padding:5px;background:#d9edf6;overflow:hidden;">','<div id="',this.IDs.controls,'" class="controls">','<div class="pull-left">','<div class="btn-group"><a href="#" class="btn btn-small" id="',this.IDs.size,'" title="contract" op="resize">Resize<\/a>','<a href="#" class="btn btn-small" id="',this.IDs.size,'" title="contract" op="resize">Full<\/a><\/div>','&nbsp;<a href="#" class="btn btn-small" op="clear">Clear<\/a>','&nbsp;<a href="#" class="btn btn-small" op="move">Move<\/a>','<\/div><div class="pull-right">','&nbsp;<a href="#" class="btn btn-small" op="close">Close<\/a>',"<\/div><\/div>","<\/div>","<\/div>",'<div class="JLoggr-main">','<div class="JLoggr-left"><\/div><div class="JLoggr-mainBody">',"<ol>",this.cache.join(""),"<\/ol>",'<\/div><div class="JLoggr-right"><\/div>',"<\/div>",'<div class="" style="background:#3f3f3f;padding:5px;color:#fe9516;">','<div class="JLoggr-left"><label for="',this.IDs.checkbox,'"><input type="checkbox" id="',this.IDs.checkbox,'" />&nbsp;Visible on page load<\/label><\/div>','<div class="JLoggr-right"><\/div>',"<\/div>"].join(""),t},t.prototype.backgroundImage=function(){var n=document.getElementsByTagName("BODY")[0];n.currentStyle&&this.IE6_POSITION_FIXED&&(n.currentStyle.backgroundImage=="none"&&(n.style.backgroundImage="url(about:blank)"),n.currentStyle.backgroundAttachment=="scroll"&&(n.style.backgroundAttachment="fixed"))},t.prototype.addMessage=function(n,t,i){if(this.outputList){var r=document.createElement("LI");r.className=n,r.innerHTML=[n,i,t].join(" | "),this.outputList.appendChild(r),this.scrollToBottom()}else this.cache.push(['<li class="',n,'">',n+" | "+i+" | ",t,"<\/li>"].join(""))},t.prototype.clear=function(){this.outputList.innerHTML=""},t.prototype.clickControl=function(n){n||(n=window.event);var t=n.target?n.target:n.srcElement;if(t.tagName=="A")switch(t.getAttributeNode("op").nodeValue){case"resize":this.resize();break;case"clear":this.clear();break;case"move":this.reposition();break;case"close":this.hide()}},t.prototype.clickFilter=function(n){var r,t,f,o,h,s,u,i,e;if(n||(n=window.event),r=n.target?n.target:n.srcElement,r&&r.tagName=="SPAN"){if(t=r.getAttributeNode("type").nodeValue,n.altKey){f=document.getElementById(this.IDs.filters).getElementsByTagName("SPAN"),o=0;for(h in this.messageTypes)this.messageTypes[h]&&o++;for(s=o==1&&this.messageTypes[t],u=0;f[u];u++)i=f[u].getAttributeNode("type").nodeValue,f[u].className=s||i==t?i:i+"Disabled",this.messageTypes[i]=s||i==t}else this.messageTypes[t]=!this.messageTypes[t],r.className=this.messageTypes[t]?t:t+"Disabled";e=[];for(t in this.messageTypes)this.messageTypes[t]||e.push(t);e.push(""),this.outputList.className=e.join("Hidden "),this.scrollToBottom()}},t.prototype.clickVis=function(n){n||(n=window.event);var t=n.target?n.target:n.srcElement;this.state.load=t.checked,this.setState()},t.prototype.scrollToBottom=function(){this.outputList.scrollTop=this.outputList.scrollHeight},t.prototype.isVisible=function(){return this.JLoggr.style.display=="block"},t.prototype.hide=function(){this.JLoggr.style.display="none"},t.prototype.show=function(){var n=document.getElementsByTagName("BODY")[0];n.removeChild(this.JLoggr),n.appendChild(this.JLoggr),this.JLoggr.style.display="block"},t.prototype.reposition=function(n){(n===undefined||n==null)&&(n=this.state&&this.state.pos===null?1:(this.state.pos+1)%4);switch(n){case 0:this.classes[0]="bbTopLeft";break;case 1:this.classes[0]="bbTopRight";break;case 2:this.classes[0]="bbBottomLeft";break;case 3:this.classes[0]="bbBottomRight"}this.state.pos=n,this.setState()},t.prototype.resize=function(n){(n===undefined||n===null)&&(n=this.state&&this.state.size==null?0:(this.state.size+1)%2),this.classes[1]=n===0?"bbSmall":"bbLarge";var t=document.getElementById(this.IDs.size);t.title=n===1?"small":"large",t.className=t.title+" btn btn-small",this.state.size=n,this.setState(),this.scrollToBottom()},t.prototype.setCookie=function(n,t,i){var r=new Date,u;r.setDate(r.getDate()+i),u=encodeURI(t)+(i==null?"":"; expires="+r.toUTCString()),document.cookie=n+"="+u},t.prototype.getCookie=function(n){for(var r,u,i=document.cookie.split(";"),t=0;t<i.length;t++)if(r=i[t].substr(0,i[t].indexOf("=")),u=i[t].substr(i[t].indexOf("=")+1),r=r.replace(/^\s+|\s+$/g,""),r==n)return decodeURI(u)},t.prototype.setState=function(){var i,n,t;try{i=[],this.setCookie(this.JLoggrCookieName,JSON.stringify(this.state),14),n=[];for(t in this.classes)n.push(this.classes[t]);this.JLoggr.className=n.join(" ")}catch(r){log.error("can't set state: "+r)}},t.prototype.getState=function(){var n=this.getCookie(this.JLoggrCookieName);if(n!=undefined)try{return JSON.parse(n)}catch(t){this.setCookie(this.JLoggrCookieName,JSON.stringify(new i),14)}return new i},t.prototype.readKey=function(n){if(n.which==113){var t=this.isVisible(),i=n.shiftKey,r=n.altKey;t&&i&&r?this.clear():t&&i?this.reposition():i||r||(t?this.hide():this.show())}},t.prototype.addEvent=function(n,t,i){var n=n.constructor===String?document.getElementById(n):n;n.attachEvent?(n["e"+t+i]=i,n[t+i]=function(){n["e"+t+i](window.event)},n.attachEvent("on"+t,n[t+i])):n.addEventListener(t,i,!1)},t.prototype.removeEvent=function(n,t,i){var n=n.constructor===String?document.getElementById(n):n;n.detachEvent?(n.detachEvent("on"+t,n[t+i]),n[t+i]=null):n.removeEventListener(t,i,!1)},t.prototype.onLoad=function(){var n=this,t,i;try{t=document.getElementsByTagName("BODY")[0],i=this.generateMarkup(),this.JLoggr=t.appendChild(i),this.outputList=this.JLoggr.getElementsByTagName("OL")[0],this.backgroundImage(),$("#"+this.IDs.checkbox).click(function(t){n.clickVis(t)}),$("#"+this.IDs.filters).click(function(t){n.clickFilter(t)}),$("#"+this.IDs.controls).click(function(t){n.clickControl(t)}),$(document).keyup(function(t){n.readKey(t)}),this.resize(this.state.size),this.reposition(this.state.pos),this.state.load&&(this.show(),document.getElementById(this.IDs.checkbox).checked=!0),this.scrollToBottom(),this.addEvent(window,"unload",function(){})}catch(r){alert("Error in onLoad: "+r)}},t}(),n.JLoggrBase=r,u=function(){function n(t){this.source="?",this.JQueryAjaxLogger=function(t,i,r){n.JLoggrInstance.addMessage("Error","JQuery Ajax Error<br>Status: "+i+"<br> Error:"+r);var u=new e,f=u.stringify(t,null,2);n.JLoggrInstance.addMessage("Error",f)};try{t!=undefined&&(this.source=t)}catch(i){alert("Error in Logger(): "+i)}}return n.prototype.init=function(){n.JLoggrInstance.show(),this.error("<b>Log<\/b> can only be initialized once")},n.prototype.toggle=function(){n.JLoggrInstance.isVisible()?n.JLoggrInstance.hide():n.JLoggrInstance.show()},n.prototype.resize=function(){n.JLoggrInstance.resize()},n.prototype.clear=function(){n.JLoggrInstance.clear()},n.prototype.move=function(){n.JLoggrInstance.reposition()},n.prototype.debug=function(t){n.JLoggrInstance.addMessage("debug",t,this.source)},n.prototype.warn=function(t){n.JLoggrInstance.addMessage("warn",t,this.source)},n.prototype.info=function(t){n.JLoggrInstance.addMessage("info",t,this.source)},n.prototype.error=function(t){n.JLoggrInstance.addMessage("error",t,this.source)},n.prototype.stackTrace=function(i){try{var r=new f(new t(i));n.JLoggrInstance.addMessage("trace",r.Result().join("<br>"))}catch(i){}},n.prototype.object=function(t){try{var i=new e,r=i.stringify(t,null,2);n.JLoggrInstance.addMessage("object",r,this.source)}catch(u){n.JLoggrInstance.addMessage("object","Can't represent object: "+u,this.source)}},n.prototype.profile=function(t){var i=new Date;return t==undefined||t==""?n.JLoggrInstance.addMessage("error","<b>ERROR:<\/b> Please specify a label for your profile statement"):n.JLoggrInstance.profiler[t]?delete n.JLoggrInstance.profiler[t]:(n.JLoggrInstance.profiler[t]=i,n.JLoggrInstance.addMessage("profile",t)),i},n}(),n.Logger=u,t=function(){function n(n){this.guess=!0,this.e=n,n!=undefined&&(this.guess=!1)}return n}(),n.PrintStackTraceOptions=t;var f=function(){function n(n){try{n==undefined?(this.options=new t,this.ex=undefined,this.guess=!0):(this.options=n,this.ex=n.e||null,this.guess=!!n.guess),this.p=new o,this.result=this.p.run(this.ex)}catch(i){log.error("printStackTrace() error: "+i)}}return n.prototype.Result=function(){return this.guess?this.p.guessAnonymousFunctions(this.result):this.result},n}(),o=function(){function n(){}return n.prototype.undef=function(){return undefined},n.prototype.run=function(n,t){return n==undefined&&(n=this.createException()),t==undefined&&(t=this.mode(n)),t==="other"?this.other(arguments.callee):this[t](n)},n.prototype.createException=function(){try{this.undef()}catch(n){return n}},n.prototype.mode=function(n){var t=window;return n.arguments&&n.stack?"chrome":n.stack&&n.sourceURL?"safari":n.stack&&n.number?"ie":typeof n.message=="string"&&typeof window!="undefined"&&t.opera?n.stacktrace?n.message.indexOf("\n")>-1&&n.message.split("\n").length>n.stacktrace.split("\n").length?"opera9":n.stack?n.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":"opera10a":"opera9":n.stack?"firefox":"other"},n.prototype.instrumentFunction=function(n,t,i){n=n||window;var r=n[t];n[t]=function(){return i.call(this,(new f).Result().slice(4)),n[t]._instrumented.apply(this,arguments)},n[t]._instrumented=r},n.prototype.deinstrumentFunction=function(n,t){n[t].constructor===Function&&n[t]._instrumented&&n[t]._instrumented.constructor===Function&&(n[t]=n[t]._instrumented)},n.prototype.chrome=function(n){var t=(n.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");return t.pop(),t},n.prototype.safari=function(n){return n.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},n.prototype.ie=function(n){var t=/^.*at (\w+) \(([^\)]+)\)$/gm;return n.stack.replace(/at Anonymous function /gm,"{anonymous}()@").replace(/^(?=\w+Error\:).*$\n/m,"").replace(t,"$1@$2").split("\n")},n.prototype.firefox=function(n){return n.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^[\(@]/gm,"{anonymous}()@").split("\n")},n.prototype.opera11=function(n){for(var u=n.stacktrace.split("\n"),f=[],t,o,r,i=0,e=u.length;i<e;i+=2)t=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/.exec(u[i]),t&&(o=t[4]+":"+t[1]+":"+t[2],r=t[3]||"global code",r=r.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,"{anonymous}"),f.push(r+"@"+o+" -- "+u[i+1].replace(/^\s+/,"")));return f},n.prototype.opera10b=function(n){for(var r=n.stacktrace.split("\n"),u=[],t,e,i=0,f=r.length;i<f;i++)t=/^(.*)@(.+):(\d+)$/.exec(r[i]),t&&(e=t[1]?t[1]+"()":"global code",u.push(e+"@"+t[2]+":"+t[3]));return u},n.prototype.opera10a=function(n){for(var r=n.stacktrace.split("\n"),u=[],i,e,t=0,f=r.length;t<f;t+=2)i=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i.exec(r[t]),i&&(e=i[3]||"{anonymous}",u.push(e+"()@"+i[2]+":"+i[1]+" -- "+r[t+1].replace(/^\s+/,"")));return u},n.prototype.opera9=function(n){for(var r=n.message.split("\n"),u=[],i,t=2,f=r.length;t<f;t+=2)i=/Line (\d+).*script (?:in )?(\S+)/i.exec(r[t]),i&&u.push("{anonymous}()@"+i[2]+":"+i[1]+" -- "+r[t+1].replace(/^\s+/,""));return u},n.prototype.other=function(n){for(var i="{anonymous}",t=[],r,u;n&&n.arguments&&t.length<10;)r=/function\s*([\w\-$]+)?\s*\(/i.test(n.toString())?RegExp.$1||i:i,u=Array.prototype.slice.call(n.arguments||[]),t[t.length]=r+"("+this.stringifyArguments(u)+")",n=n.caller;return t},n.prototype.stringifyArguments=function(n){for(var r=[],u=Array.prototype.slice,t,i=0;i<n.length;++i)t=n[i],t===undefined?r[i]="undefined":t===null?r[i]="null":t.constructor&&(t.constructor===Array?r[i]=t.length<3?"["+this.stringifyArguments(t)+"]":"["+this.stringifyArguments(u.call(t,0,1))+"..."+this.stringifyArguments(u.call(t,-1))+"]":t.constructor===Object?r[i]="#object":t.constructor===Function?r[i]="#function":t.constructor===String?r[i]='"'+t+'"':t.constructor===Number&&(r[i]=t));return r.join(",")},n.prototype.ajax=function(n){var t=this.createXMLHTTPObject();if(t)try{return t.open("GET",n,!1),t.send(null),t.responseText}catch(i){}return""},n.prototype.createXMLHTTPObject=function(){for(var i,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=0;n<t.length;n++)try{return i=t[n](),this.createXMLHTTPObject=t[n],i}catch(r){}},n.prototype.isSameDomain=function(n){return typeof location!="undefined"&&n.indexOf(location.hostname)!==-1},n.prototype.getSource=function(n){return n in this.sourceCache||(this.sourceCache[n]=this.ajax(n).split("\n")),this.sourceCache[n]},n.prototype.guessAnonymousFunctions=function(n){for(var i,o,t=0;t<n.length;++t){var u=n[t],f=/\{anonymous\}\(.*\)@(.*)/.exec(u);if(f&&(i=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/.exec(f[1]),i)){var r=i[1],e=i[2],s=i[3]||0;r&&this.isSameDomain(r)&&e&&(o=this.guessAnonymousFunction(r,e,s),n[t]=u.replace("{anonymous}",o))}}return n},n.prototype.guessAnonymousFunction=function(n,t){var i;try{i=this.findFunctionName(this.getSource(n),t)}catch(r){i="getSource failed with url: "+n+", exception: "+r.toString()}return i},n.prototype.findFunctionName=function(n,t){for(var u="",r,o=Math.min(t,20),i,e,f=0;f<o;++f)if(r=n[t-f-1],e=r.indexOf("//"),e>=0&&(r=r.substr(0,e)),r&&((u=r+u,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/.exec(u),i&&i[1])||(i=/function\s+([^(]*?)\s*\(([^)]*)\)/.exec(u),i&&i[1])||(i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/.exec(u),i&&i[1])))return i[1];return"(?)"},n}(),e=function(){function n(){}return n.prototype.getSerialize=function(n,t){var i=[];return t=t||function(){return"[Circular]"},function(r,u){var f=u;return typeof u=="object"&&u&&(i.indexOf(u)!==-1?f=t(r,u):i.push(u)),n&&(f=n(r,f)),f}},n.prototype.stringify=function(n,t,i,r){return JSON.stringify(n,this.getSerialize(t,r),i)},n}();u.JLoggrInstance=new r})(JLoggr||(JLoggr={})),log=new JLoggr.Logger